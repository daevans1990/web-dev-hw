@import "syntax-variables";
@import "ui-variables";

@import "packages/red-wavy-underline/styles/red-wavy-underline";

.theme-one-light-ui, .theme-one-dark-ui {
  .status-bar { font-size: 14px; }
  .tab-bar { font-size: 14px; }
  .tree-view { font-size: 14px; }
}


// Highlights the cursor line
atom-text-editor::shadow {
  .cursor-line {
    background-color: @background-color-highlight;
  }
}

// Un-italicizes comments
atom-text-editor::shadow {
  .comment {
    font-style: normal;
  }
}

// Makes the cursor pulse instead of blink
atom-text-editor::shadow {
  .cursor {
    transition: opacity 0.5s;
  }
}

// Un-italicizes code markup in Markdown
atom-text-editor::shadow {
  .markup.raw.gfm {
    font-style: normal;
    color: @syntax-color-keyword;
  }
}

// Brightens the gutter diff indicators to make them more visible
.diff-icon(@color) {
  background-color: fade(@color, 60%);

  &:before {
    color: contrast(fade(@color, 60%));
  }
}

.diff-border(@color) {
  border-color: lighten(@color, 15%);
  border-left-width: 4px;
}

@gutter-padding: 15px;

atom-text-editor::shadow {
  .gutter .line-number {
    padding-left: @gutter-padding;

    &.git-line-added {
      .diff-border(@text-color-success);
      padding-left: @gutter-padding - 4;
    }

    &.git-line-modified {
      .diff-border(@text-color-warning);
      padding-left: @gutter-padding - 4;
    }

    &.git-line-removed {
      .diff-border(@text-color-error);
      padding-left: @gutter-padding;
    }
  }

  .gutter.git-diff-icon .line-number {
    &.git-line-added {
      .diff-icon(@text-color-success);
    }

    &.git-line-modified {
      .diff-icon(@text-color-warning);
    }

    &.git-line-removed {
      .diff-icon(@text-color-error);
    }
  }
}

// Makes the bracket matcher highlight more noticeable
atom-text-editor::shadow {
  .bracket-matcher .region {
    border-bottom: 1px solid yellow;
  }
}

// Replaces the atom-lint error highlight with the red wavy underline
.lint .violation-border.violation-warning {
  .red-wavy-underline;
}

// Highlights trailing whitespace except on the cursor line
atom-text-editor::shadow {
  div.line:not(.cursor-line) {
    .trailing-whitespace {
      background-color: @background-color-error;
      color: contrast(@background-color-error);
    }
  }
}

// https://discuss.atom.io/t/crazy-3d-angled-tree-view/18765
#atom-perspective() {
  @viewing-distance: 12in;
  @rotation: 20deg;

  .tree-view-scroller {
    transform: translateY(-10vh) perspective(@viewing-distance) rotateY(@rotation);
    padding-top: 12vh;
    padding-bottom: 12vh;
    transform-origin: left;
    width: 120%;
    height: 120%;
  }
  body /deep/ atom-text-editor-minimap {
    transform: perspective(@viewing-distance) rotateY(-@rotation);
    transform-origin: right;
  }
}

// Comment or uncomment the next line to control whether the atom-perspective feature is enabled
// #atom-perspective;
